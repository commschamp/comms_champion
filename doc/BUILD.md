# How to Build

This project uses [CMake](https://cmake.org) cross-platform build system to
generate required build files native to the platform.

## Available CMake Options
Please open major [CMakeLists.txt](../CMakeLists.txt) for the complete list
of available options and other input parameters.

## Choosing C++ Standard

Since CMake v3.1 it became possible to set version of C++ standard by setting
**CMAKE_CXX_STANDARD** variable. If no value of this variable is set in command
line arguments, default value **11** will be assigned to it. In order to use
c++14 standard in compilation, set the variable value to **14**. 

Please **NOTE**, that _clang_ compiler may have problems compiling valid c++11 
constructs used in this project. Usage of C++14 may fix the problem.

## Build and Install Examples

The examples below are Linux/Unix system oriented, i.e. they use **make** utility
to build the "install" target after configuration with **cmake**. 

On Windows
systems with Visual Studio compiler, the CMake utility generates Visual Studio
solution files by default. Build "install" project. It is also possible to 
generate Makefile-s on Windows by providing additional **-G "NMake Makefiles"** option
to **cmake**. In this case use **nmake** utility instead of **make**.

Please review the examples below and use appropriate option that suites your
needs. Remember to add **-DCMAKE_BUILD_TYPE=Release** option for release
builds.

### Complete Build Linux Example
```
$> cd /path/to/comms_champion
$> mkdir build && cd build
$> cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/some/install/dir 
$> make install 
```

### Install Only Headers-only **COMMS** Library Linux Example
This example will skip build of any tool available, it will just install 
the **COMMS** library headers in **install/include** subdirectory.

```
$> cd /path/to/comms_champion
$> mkdir build && cd build
$> cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/some/install/dir \
    -DCC_COMMS_LIB_ONLY=ON -DCC_NO_UNIT_TESTS=ON ..
$> make install 
```
### Windows + Visual Studio Build Example
Generate Makefile-s with **cmake** and use Visual Studio compiler to build.

```
$> cd /path/to/comms_champion
$> mkdir build && cd build
$> cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/some/install/dir \
    -DCC_QT_DIR=C:\Qt\Qt5.7.1\5.7\msvc2015 -G "NMake Makefiles" ..
$> nmake install 
```

On Windows platform, there is also **deploy_qt** build target. When built, it
invokes **windeployqt.exe** utility, provided by Qt5 installation, to deploy
all relevant Qt libraries to the installation directory. 

```
$> nmake deploy_qt 
```

### Using Clang Compiler
Please use c++14 standard with clang compiler.

```
$> cd /path/to/comms_champion/sources
$> mkdir build && cd build
$> CC=clang CXX=clang++ cmake -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/some/install/dir -DCMAKE_CXX_STANDARD=14 ..
$> make install 
```

## Building Documentation
The documentation is not created during normal build process. The documentation of
the [COMMS Library](https://github.com/arobenko/comms_champion#comms-library) 
can be generated by building **doc_comms** target:

``` 
$> make doc_comms
```

The HTML documentation will reside in **${CMAKE_INSTALL_PREFIX}/share/doc/comms/html** directory.

The documentation of 
the **CommsChampion Library** used to develop a plugin to 
[CommsChampion Tools](https://github.com/arobenko/comms_champion#commschampion-tools) 
can be generated by building **doc_commschampion**
target:
 
```
$> make doc_commschampion
```

The HTML documentation will reside in **${CMAKE_INSTALL_PREFIX}/share/doc/comms_champion/html** directory.

**NOTE**, that you must have 
[Doxygen](www.doxygen.org) 
and [Dia](https://wiki.gnome.org/Apps/Dia) 
being installed on your system in order to be able to properly generate the 
documentation.

